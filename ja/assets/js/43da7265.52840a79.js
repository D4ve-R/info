(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[97],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return f}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),f=r,m=d["".concat(s,".").concat(f)]||d[f]||u[f]||a;return n?i.createElement(m,o(o({ref:t},p),{},{components:n})):i.createElement(m,o({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3878:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(7294),r="icon_1PGw",a=n(9205),o=function(e){return i.createElement("div",{className:"alert alert--primary",role:"alert",style:{margin:"2rem"}},i.createElement("div",{className:r},i.createElement(a.A,{icon:"\ud83d\udca1",active:"true"})),e.children)}},983:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var i=n(7294),r=n(9205),a="titleOffset_2I3u",o="iconContainer_1xRA",l=function(e){var t=e.title?i.createElement("div",{className:"card__header"},i.createElement("span",{className:o},e.icon&&i.createElement(r.A,{icon:e.icon,link:e.link,active:"true"})),i.createElement("h3",{className:e.icon&&a},e.title)):"";return i.createElement("div",{className:"card-demo",style:{margin:"2rem"}},i.createElement("div",{className:"card"},t,i.createElement("div",{className:"card__body"},i.createElement("p",null," ",e.children," "))))}},9205:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var i=n(7294),r="hidden_2JtY",a="iconContainer_2Rnc",o="visible_2147",l="link_Lh4h",s="clickable_3vcc",c=function(e){var t=" "+(e.active?o:r),n=l+" "+(e.link&&s);return i.createElement("div",{className:a+t},i.createElement("a",{href:e.link,className:n},e.icon||"\ud83d\ude80"))}},6649:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var i=n(7294),r="threeScene_3QXR",a=function(e){return i.createElement("iframe",{className:r,width:"100%",height:"600px",key:Math.random(),src:e.link,frameBorder:"0"})}},7712:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var i=n(2122),r=n(9756),a=(n(7294),n(3905)),o=(n(3878),n(983)),l=(n(6649),["components"]),s={title:"\ud83d\udcc3 Editing Properties",sidebar_position:2},c={unversionedId:"Guide/web-ifc/Tutorials/Editing Properties",id:"Guide/web-ifc/Tutorials/Editing Properties",isDocsHomePage:!1,title:"\ud83d\udcc3 Editing Properties",description:"Introduction",source:"@site/docs/Guide/web-ifc/Tutorials/Editing Properties.mdx",sourceDirName:"Guide/web-ifc/Tutorials",slug:"/Guide/web-ifc/Tutorials/Editing Properties",permalink:"/info/ja/docs/Guide/web-ifc/Tutorials/Editing Properties",version:"current",sidebarPosition:2,frontMatter:{title:"\ud83d\udcc3 Editing Properties",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Hello World",permalink:"/info/ja/docs/Guide/web-ifc/Tutorials/Hello world"},next:{title:"\ud83d\udcc3 Properties",permalink:"/info/ja/docs/Guide/web-ifc/Tutorials/Properties"}},p=[{value:"Introduction",id:"introduction",children:[]},{value:"How to do it",id:"how-to-do-it",children:[{value:"Setting up",id:"setting-up",children:[]},{value:"Creating the modified file",id:"creating-the-modified-file",children:[]}]},{value:"Next steps",id:"next-steps",children:[]}],u={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,l);return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"\ud83e\uddca\nIFC.js does not only read and parse data from IFC files; the web-ifc library has writing capabilities. This cool feature allow users to edit or create ifc items. In this tutorial we will explore the methods of ",(0,a.kt)("strong",{parentName:"p"},"editing properties")," in an IFC file and save changes to a new file","*","*","."),(0,a.kt)("p",null,"\ud83d\udcbe\nThis tutorial will help us to ",(0,a.kt)("strong",{parentName:"p"},"Edit Properties")," of IFC without a viewer\ud83d\ude0e."),(0,a.kt)(o.M,{mdxType:"IfcCard"},"\ud83d\udc49 You can check out the final result deployed ",(0,a.kt)("a",{href:"https://ifcjs.github.io/hello-world/examples/web-ifc/ifc-to-json/properties/index.html"},"here")," and the full code ",(0,a.kt)("a",{href:"https://github.com/ifcjs/hello-world/tree/main/examples/web-ifc/ifc-to-json/editing-properties"},"here"),"."),(0,a.kt)("p",null,"\ud83d\udcda\nThere are several types of properties in the IFC scheme, each with a specific purpose, and IFC.js can get ",(0,a.kt)("strong",{parentName:"p"},"all of them"),". The list of all properties and how to retrieve them has been explained in details in the properties tutorial."),(0,a.kt)(o.M,{icon:"\ud83d\udcd5",title:"Native properties",mdxType:"IfcCard"},"Specific to each IFC class."),(0,a.kt)("p",null,"\ud83d\udeb4\u200d\u2642\ufe0f But enough theory! Let's get down to work."),(0,a.kt)("h2",{id:"how-to-do-it"},"How to do it"),(0,a.kt)("h3",{id:"setting-up"},"Setting up"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Install web-ifc package")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"npm install web-ifc")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Imports and Global Variables")),(0,a.kt)("p",null,"Make sure you copy the wasm files into the root directory or\ncopy wasm files to a directory of your choice but you will have to call setWasmPath"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import {\n    IfcAPI, IFCBUILDINGSTOREY\n} from "web-ifc/web-ifc-api";\n..\n\n..\n..\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Reading File")),(0,a.kt)("p",null,"We will read file and call ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/IFCjs/hello-world/blob/main/examples/web-ifc/ifc-to-json/properties/app.js#:~:text=async%20function%20LoadFile(ifcAsText)"},(0,a.kt)("inlineCode",{parentName:"a"},"LoadFileData()"))," and send IFC data as Text"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'fetch("../../../../IFC/01.ifc")\n  .then((response) => response.text())\n  .then((data) => {\n    // This will send the file data to our LoadFileData method\n    LoadFileData(data);\n  });\n..\n  async function LoadFileData(ifcAsText) {\n    const uint8array = new TextEncoder().encode(ifcAsText);\n    modelID = await OpenIfc(uint8array);\n    getLevels();\n    ..\n}\n..\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"}," Let's say we want to change the name of building storey i.e. level.")),(0,a.kt)("p",null,"First we need to get all items of type building storey or IFCBUILDINGSTOREY\nIn this example we will get all items of type IFC building elements then we will filter by the Name property for Nivel 2\nwhen the selected level is found, we will change the name to 'Level 2' and save the line to a new file."),(0,a.kt)("p",null,"web-ifc api has a function GetLineIDsWithType which returns IDs of all elements in a given model for a specific type. the function takes two arguments model id and element type.\nIFC types are included in the web-ifc api as enumerations and should be imported to be used with GetLineIDsWithType function"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"{8}","{8}":!0},'..\n\nasync function getLevels() {\n  levels = await ifcapi.GetLineIDsWithType(modelID, IFCBUILDINGSTOREY);\n  for (let i = 0; i < levels.size(); i++) {\n    const lvl = ifcapi.GetLine(modelID, levels.get(i));\n    if (lvl.Name.value === "Nivel 2") {\n      lvl.LongName.value = "Level 2";\n      ifcapi.WriteLine(modelID, lvl);\n      createDownloadLink(lvl);\n    }\n  }\n}\n..\n\n}\n')),(0,a.kt)("p",null,"The returned object lvl is an array of objects coresponding to the selected type (IFCBUILDINGSTOREY in our case). This object contains the properties\nAn example of the returned object for IFCBUILDINGSTOREY is shown below."),(0,a.kt)("p",null,"\ud83d\udc49 the properties have their values nested. i.e. Name property will not return the value corresponding to it, an object will be return having\n",(0,a.kt)("inlineCode",{parentName:"p"},'type: 1, value: "Nivel 2"'),"."),(0,a.kt)("p",null,"So in order to return the name value we will have to refer to it as lvl.Name.value"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"{8}","{8}":!0},'{\n  "expressID": 144,\n  "type": 3124254112,\n  "GlobalId": {\n    "type": 1,\n    "value": "0w984V0GL6yR4z75YWgVzB"\n  },\n  "OwnerHistory": {\n    "type": 5,\n    "value": 41\n  },\n  "Name": {\n    "type": 1,\n    "value": "Nivel 2"\n  },\n  "Description": null,\n  "ObjectType": {\n    "type": 1,\n    "value": "Nivel:Nivel 1"\n  },\n  "ObjectPlacement": {\n    "type": 5,\n    "value": 143\n  },\n  "Representation": null,\n  "LongName": {\n    "type": 1,\n    "value": "Level 2"\n  },\n  "CompositionType": {\n    "type": 3,\n    "value": "ELEMENT"\n  },\n  "Elevation": {\n    "type": 4,\n    "value": 3\n  }\n}\n')),(0,a.kt)("h3",{id:"creating-the-modified-file"},"Creating the modified file"),(0,a.kt)("p",null,"After processing all changes, we will create a new file and add a download link to the web page so the user can download the file"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"{8}","{8}":!0},'function createDownloadLink(lvl) {\n  const data = ifcapi.ExportFileAsIFC(modelID);\n  const blob = new Blob([data]);\n  const file = new File([blob], "modified.ifc");\n  const url = URL.createObjectURL(file);\n  const link = document.createElement("a");\n  link.innerText = "Download";\n  link.download = "modified.ifc";\n  link.setAttribute("href", url);\n\n  document.body.appendChild(link);\n}\n')),(0,a.kt)("h2",{id:"next-steps"},"Next steps"),(0,a.kt)("p",null,"\ud83c\udf89\nCongratulations! You should now be able to ",(0,a.kt)("strong",{parentName:"p"},"traverse any IFC")," and extract the properties you are looking for."),(0,a.kt)("p",null,"You can use the web-ifc APIs to edit properties and store the edited data into a new IFC file."))}d.isMDXComponent=!0}}]);
<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/info/zh/blog/rss.xml" title="IFC.js Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/info/zh/blog/atom.xml" title="IFC.js Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="IFC.js" href="/info/zh/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">在30分钟内建立一个CDE | IFC.js</title><meta data-react-helmet="true" property="og:title" content="在30分钟内建立一个CDE | IFC.js"><meta data-react-helmet="true" name="description" content="所有的大公司都在销售他们的CDE。你为什么不做你自己的CDE呢？"><meta data-react-helmet="true" property="og:description" content="所有的大公司都在销售他们的CDE。你为什么不做你自己的CDE呢？"><meta data-react-helmet="true" property="og:url" content="https://IFCjs.github.io/info/zh/blog/Build a CDE in 30 minutes"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://IFCjs.github.io/info/zh/img/social-card.png"><meta data-react-helmet="true" name="twitter:image" content="https://IFCjs.github.io/info/zh/img/social-card.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/info/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://IFCjs.github.io/info/zh/blog/Build a CDE in 30 minutes"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/blog/Build a CDE in 30 minutes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/ja/blog/Build a CDE in 30 minutes" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/zh/blog/Build a CDE in 30 minutes" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/blog/Build a CDE in 30 minutes" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://JKKUEA9VHK-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/info/zh/assets/css/styles.fe61bea9.css">
<link rel="preload" href="/info/zh/assets/js/runtime~main.7d35a546.js" as="script">
<link rel="preload" href="/info/zh/assets/js/main.a2a3acd6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/info/zh/"><img src="/info/zh/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/info/zh/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">IFC.js</strong></a><a class="navbar__item navbar__link" href="/info/zh/docs/Introduction">文件</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/info/zh/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/FXfyR4XrKT" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社区</a><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/info/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/info/ja/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">日本語</a></li><li><a href="/info/zh/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/info/zh/"><img src="/info/zh/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/info/zh/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">IFC.js</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/info/zh/docs/Introduction">文件</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/info/zh/blog">博客</a></li><li class="menu__list-item"><a href="https://discord.gg/FXfyR4XrKT" target="_blank" rel="noopener noreferrer" class="menu__link">社区</a></li><li class="menu__list-item"><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/info/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/info/ja/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">日本語</a></li><li class="menu__list-item"><a href="/info/zh/blog/Build a CDE in 30 minutes" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/info/zh/blog/Why IFC doesnt work">为什么IFC不起作用</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/info/zh/blog/Build a CDE in 30 minutes">在30分钟内建立一个CDE</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/info/zh/blog/prometheus">我们需要的BIM</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/info/zh/blog/Open BIM">你好，IFC.js!</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="margin-bottom--sm blogPostTitle_GeHD">在30分钟内建立一个CDE</h1><div class="margin-vert--md"><time datetime="2021-09-27T00:00:00.000Z" class="blogPostDate_fNvV">2021年9月27日 · 一分钟阅读</time></div><div class="avatar margin-vert--md"><a href="https://github.com/agviegas" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://secure.gravatar.com/avatar/9263b9f81d351788e46bc64000c03cb6" alt="Ansoni"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/agviegas" target="_blank" rel="noopener noreferrer">Ansoni</a></h4><small class="avatar__subtitle">从头开始制作你自己的CDE!</small></div></div></header><div class="markdown"><p><em>所有的大公司都在销售他们的CDE。你为什么不做你自己的CDE呢？</em></p><div><img src="/info/zh/assets/images/lego-27af32023b801c95f6e806ca0f47aec0.jpg" alt="Lego image"><a target="_blank" href="https://www.pexels.com/photo/set-of-multicolored-plastic-construction-toys-scattered-on-floor-7444982/"> <i>来源</i> </a></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="但等等，什么是cde？"></a>但等等，什么是CDE？<a class="hash-link" href="#但等等，什么是cde？" title="直接链接到标题">#</a></h2><p>📦
非正式地讲，<strong>CDE</strong>只不过是一个集中的地方，可以通过互联网获取建筑项目的信息。</p><div class="card-demo" style="margin:2rem"><div class="card"><div class="card__body"><p> 🔧🔨 CDEs可以拥有传统BIM应用的所有功能。3D查看器、阅读和编辑数据、能源模拟、自动测量和预算等。 </p></div></div></div>️<p>🌎🌍🌏
然而，它们有一个基本的优势：它们是<strong>在网络上的</strong>，这意味着它们可以从任何地方和任何设备上访问，而无需安装任何东西。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="好吧，但我为什么想要一个cde？"></a>好吧，但我为什么想要一个CDE？<a class="hash-link" href="#好吧，但我为什么想要一个cde？" title="直接链接到标题">#</a></h2><p>💸
嗯，事实是，现在，CDE是新的黑色。<strong>业内几乎每家大公司都在建造CDE</strong>，并以高昂的价格出售给他们的客户。</p><p>🏃‍♀️🏃‍♂️🏃‍♀️
随着互联网越来越快，越来越好，总有一天，我们所知道的桌面应用程序将失去意义，而我们的大部分任务将在Web应用程序或服务器应用程序中完成。换句话说，<strong>CDE是未来的</strong>，而现在有一场建立最佳CDE的大竞赛。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="我明白了，cde是个好东西。但我永远无法自己开发一个。"></a>我明白了，CDE是个好东西。但我永远无法自己开发一个。<a class="hash-link" href="#我明白了，cde是个好东西。但我永远无法自己开发一个。" title="直接链接到标题">#</a></h2><p>👩‍🏫
错了! 你认为你不能做BIM解决方案的最大受益者是目前的BIM供应商。在IFC.js，我们想打破这个神话，从头开始做一个简单的CDE，以表明<strong>开始开发BIM应用并不难</strong>。</p><p>☝
很明显，这个教程是一个最小的例子。但从本教程的简单CDE到大公司的CDE，并没有想象中的那么多距离。<strong>闲话少说，让我们继续吧！</strong>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cde设计"></a>CDE设计<a class="hash-link" href="#cde设计" title="直接链接到标题">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="战略"></a>战略<a class="hash-link" href="#战略" title="直接链接到标题">#</a></h3><p>⏳
我们只有<strong>个半小时的时间来做这个CDE，所以我们必须仔细选择如何做，以不浪费任何时间。首先：我们需要</strong>个地方来存储项目文件<strong>。你知道有什么现有的工具可以让我们这样做吗？我们已经想到了</strong>Google Drive**!</p><div class="card-demo" style="margin:2rem"><div class="card"><div class="card__body"><p> 💪 Google Drive有很多功能：我们可以控制对文件的读写权限、版本控制、开放的API......。简而言之，它有许多BIM软件公司向你收费的东西，但完全免费。 </p></div></div></div>️<p>🛑
然而，Google Drive有一个根本性的限制：它没有3D浏览器，也不允许轻易访问BIM模型（如IFC模型）中的数据。</p><p>🤝
<strong>这就是IFC.js的作用</strong>，它允许我们直接在网上建立BIM应用。将google drive的存储和权限功能与IFC.js的3D和数据阅读及编辑功能相结合，我们可以在30分钟内建立我们的基本CDE。下面是方法。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="建筑学"></a>建筑学<a class="hash-link" href="#建筑学" title="直接链接到标题">#</a></h3><p>🤷‍♀️
<strong>如何连接</strong>IFC.js和google drive，以便能够同时作为CDE使用？我们的设计方案如下。它可能看起来很复杂，但实际上非常非常简单。</p><div><img src="/info/zh/assets/images/schema-ee9c12a5d7cba299d5a0035eccae4d6e.jpg" alt="Schema explaining the concept of the CDE"><a target="_blank"> <i></i> </a></div><p>🏠
首先，我们要创建一个<strong>3D BIM网络应用程序，能够从google drive下载文件</strong>。具体来说，它将从google drive下载它在URL参数中找到的ID的文件。例如，如果你的URL是<code>https://.../?id=123&amp;name=TEST.ifc</code>，它将从登录到应用程序的用户的谷歌账户中下载<code>ID</code>为<code>123</code>的文件。</p><p>🌐
然后，我们将创建一个<a href="https://developer.chrome.com/docs/extensions/" target="_blank" rel="noopener noreferrer">谷歌铬扩展</a>，它将做三件事。</p><ul><li><p><strong>读取用户通过网络搜刮点击的HTML元素的名称</strong>。</p></li><li><p><strong>使用google drive API找出该元素的ID</strong>。</p></li><li><p><strong>创建一个菜单，让用户用IFC.js网络应用程序打开URL</strong>。此外，你要添加两个URL参数：文件的名称和ID。</p><div class="card-demo" style="margin:2rem"><div class="card"><div class="card__body"><p> 简而言之：一个google chrome扩展在用户点击文件时获得文件的名称，并打开一个知道如何按其ID下载文件的网络应用。这就是全部。 </p></div></div></div>️</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ifcjs应用程序"></a>IFC.js应用程序<a class="hash-link" href="#ifcjs应用程序" title="直接链接到标题">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bim应用程序"></a>BIM应用程序<a class="hash-link" href="#bim应用程序" title="直接链接到标题">#</a></h4><p>🏢
感谢IFC.js，**这是最简单的部分。具体来说，我们要用<a href="https://github.com/IFCjs/web-ifc-viewer" target="_blank" rel="noopener noreferrer">web-ifc-viewer</a>来创建它，它可以在50行代码中制作BIM应用程序。你可以找到所有的代码<a href="https://github.com/IFCjs/hello-world/tree/main/examples/web-ifc-viewer/google-drive-viewer" target="_blank" rel="noopener noreferrer">这里</a>。</p><p>😉
是的，你没看错。<strong>一个完整的3D BIM应用，只有50行</strong>。它还包括剖面图和三维尺寸等功能。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword module" style="color:#728fcb">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#b6ad9a">{</span><span class="token imports maybe-class-name">IfcViewerAPI</span><span class="token imports punctuation" style="color:#b6ad9a">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#728fcb">from</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;web-ifc-viewer&#x27;</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword module" style="color:#728fcb">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#b6ad9a">{</span><span class="token imports maybe-class-name">Color</span><span class="token imports punctuation" style="color:#b6ad9a">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#728fcb">from</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;three&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 获取渲染3d场景的div容器</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> container </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#93abdc">document</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">getElementById</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&#x27;viewer-container&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 初始化IFC.js API，并将其添加为全局变量</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> viewer </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">IfcViewerAPI</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                            container</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                            backgroundColor</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token number" style="color:#063289">0xffffff</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                                </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">applyWebIfcConfig</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                            </span><span class="token constant">COORDINATE_TO_ORIGIN</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">true</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                            </span><span class="token constant">USE_FAST_BOOLS</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">true</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                                </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">webIfcAPI</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> viewer</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 设置场景</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">addAxes</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">addGrid</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token number" style="color:#063289">50</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token number" style="color:#063289">50</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">setWasmPath</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&#x27;wasm/&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">clipper</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">active</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">true</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> dimensionsActive </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">false</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 增加基本的输入逻辑</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">handleKeyDown</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#063289">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;KeyE&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            dimensionsActive </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token operator" style="color:#063289">!</span><span class="token plain">dimensionsActive</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">dimensions</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">active</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> dimensionsActive</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">dimensions</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">previewActive</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> dimensionsActive</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">unPrepickIfcItems</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">onmousemove</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> dimensionsActive </span><span class="token operator" style="color:#063289">?</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                                            </span><span class="token keyword null nil" style="color:#728fcb">null</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                                </span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">prePickIfcItem</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;KeyD&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">dimensions</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">create</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;KeyG&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">clipper</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">createPlane</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;Delete&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">dimensions</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">deleteAll</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">clipper</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">deletePlane</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">unpickIfcItems</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">onkeydown</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> handleKeyDown</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 悬停在项目上时突出显示项目</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">onmousemove</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">prePickIfcItem</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">// 选择项目和日志属性</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method-variable function-variable method function property-access" style="color:#b29762">ondblclick</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#063289">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> item </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#728fcb">await</span><span class="token plain"> viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">pickIfcItem</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token boolean" style="color:#728fcb">true</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">modelID</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token keyword nil" style="color:#728fcb">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#063289">||</span><span class="token plain"> item</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#063289">===</span><span class="token plain"> </span><span class="token keyword nil" style="color:#728fcb">undefined</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#728fcb">return</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">log</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#728fcb">await</span><span class="token plain"> viewer</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">getProperties</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">modelID</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">true</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span></div></div></div><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o">拷贝</button></div></div><p>🎨
确保你创建了必要的HTML和CSS，使浏览者拥有你想要的外观和感觉。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="google-drive-api"></a>Google Drive API<a class="hash-link" href="#google-drive-api" title="直接链接到标题">#</a></h4><p>🔒🔒🔒
好吧，我们有一个BIM浏览器，但现在它还不能从<strong>Google Drive API</strong>下载任何东西。不过，这很容易：只要按照<a href="https://developers.google.com/drive/api/v3/quickstart/js" target="_blank" rel="noopener noreferrer">官方文档</a>中的这些步骤，复制并粘贴JavaScript代码，就能访问API。</p><div class="card-demo" style="margin:2rem"><div class="card"><div class="card__body"><p> 🔑🔑🔑 按照谷歌的指南，你需要创建一个新的谷歌云项目，以获得你自己的CLIENT_ID和API_KEY；它们只是你必须拥有的两个文本，以便谷歌知道你是谁。换句话说，你不能使用我们拥有的密钥来访问你的驱动器 </p></div></div></div>️<p>📋
如果你看一下我们发布的代码，你会发现**我们几乎复制和粘贴了<a href="https://developers.google.com/drive/api/v3/quickstart/js" target="_blank" rel="noopener noreferrer">google范例</a>中的所有代码。我们唯一添加的是以下内容，它只是从Web应用程序的URL中获取文件的ID，并从google drive中下载它。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">/**</span></div><div class="token-line" style="color:#728fcb"><span class="token comment" style="color:#b6ad9a">     *  当签到状态改变时被调用，以适当地更新用户界面。在签到后，调用API。</span></div><div class="token-line" style="color:#728fcb"><span class="token comment" style="color:#b6ad9a">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">updateSigninStatus</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">isSignedIn</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">isSignedIn</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token function" style="color:#b29762">getIdAndName</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            fileName</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#728fcb">`</span><span class="token template-string string" style="color:#728fcb">Name: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#b6ad9a">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#b6ad9a">}</span><span class="token template-string template-punctuation string" style="color:#728fcb">`</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token function" style="color:#b29762">downloadFile</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#728fcb">else</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">log</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&#x27;No ID was providen as URL parameter!&#x27;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token comment" style="color:#b6ad9a">/**</span></div><div class="token-line" style="color:#728fcb"><span class="token comment" style="color:#b6ad9a">     *  在点击按钮时签入用户。</span></div><div class="token-line" style="color:#728fcb"><span class="token comment" style="color:#b6ad9a">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">handleAuthClick</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        authorizeButton</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">onclick</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> handleSignoutClick</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        buttonText</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">innerText</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;Sign out&#x27;</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        gapi</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">auth2</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">getAuthInstance</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">signIn</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">downloadFile</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">fileId</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        gapi</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">client</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">drive</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">files</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">get</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            fileId</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> fileId</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            alt</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;media&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">then</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token function" style="color:#b29762">loadIfcModel</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">            </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">error</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">getIdAndName</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> urlParams </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">search</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> id </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> urlParams</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">get</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&quot;id&quot;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> name </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> urlParams</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">get</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&quot;name&quot;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#728fcb">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">loadIfcModel</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">text</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> blob </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">Blob</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">text</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain">type</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;text/plain&#x27;</span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> file </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">blob</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&quot;ifcModel&quot;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token dom variable" style="color:#93abdc">window</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">webIfcAPI</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token constant">IFC</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">loadIfc</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span></div></div></div><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o">拷贝</button></div></div><p>🎉🎉 祝贺你! 你刚刚建立了一个能够从Google Drive下载文件的BIM应用程序。现在只剩下最后一个部分：创建谷歌浏览器扩展。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="浏览器扩展"></a>浏览器扩展<a class="hash-link" href="#浏览器扩展" title="直接链接到标题">#</a></h3><p>现在我们要做一个谷歌浏览器扩展，以便<strong>用户可以选择他们想要打开的文件</strong>。如果你以前没有做过这个，可能听起来很吓人，但实际上非常简单。你可以找到完成的结果[这里]（<a href="https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE%EF%BC%89%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE）。</a></p><div class="card-demo" style="margin:2rem"><div class="card"><div class="card__body"><p> 🔑🔑🔑 按照谷歌的指南，你需要创建一个新的谷歌云项目，以获得你自己的CLIENT_ID和API_KEY；它们只是你必须拥有的两个文本，以便谷歌知道你是谁。换句话说，你不能使用我们拥有的密钥来访问你的驱动器！你可以通过以下方式来实现：1. <a href="https://developers.google.com/drive/api/v3/about-sdk#create_and_open_files_directly_from_the_drive_ui" target="_blank" rel="noopener noreferrer">请看这里，了解更多细节</a>。 </p></div></div></div>️<p>👣
互联网上有许多<a href="https://dev.to/anobjectisa/how-to-build-a-chrome-extension-new-manifest-v3-5edk" target="_blank" rel="noopener noreferrer">分步指南</a>，但我们建议你从我们的资源库中获取代码，研究它并玩弄它，看看它是如何工作的。</p><p>🧱
实际上只有2个重要的文件。</p><ul><li><p><a href="https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE/background.js" target="_blank" rel="noopener noreferrer">background.js</a>：控制页面的事件，比如当用户点击某个东西时，但不能访问页面内容。</p></li><li><p><a href="https://github.com/IFCjs/hello-world/tree/main/examples/extensions/Drive-CDE/foreground.js" target="_blank" rel="noopener noreferrer">foreground.js</a>: 可以访问页面内容，但不能访问事件。</p></li></ul><p>👬
因此，正如你所想象的，这两个文件必须相互沟通，以便做我们想要的事情。正如你在代码中看到的，它们用一个简单的消息系统来做。</p><p>👩‍🏫
在资源库中，你会发现关于什么做什么的分步注释。总共只有不到100行的相关代码：其他都是复制和粘贴的。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="所有的人都在一起"></a>所有的人都在一起!<a class="hash-link" href="#所有的人都在一起" title="直接链接到标题">#</a></h3><p>🔥🔥🔥
这就是我们的30分钟CDE的样子。</p><iframe width="100%" height="600px" src="https://www.youtube.com/embed/lYzTaOBuv7k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="总结"></a>总结<a class="hash-link" href="#总结" title="直接链接到标题">#</a></h2><p>🏆
祝贺你！你刚刚创建了<strong>你的第一个CDE</strong>。你刚刚创建了<strong>你的第一个CDE</strong>。它可能看起来不多，但想想它的所有功能：文件存储、权限和版本控制、三维视图、访问属性、三维测量、剖面图......</p><p>🚀🚀🚀
如果我们在这么短的时间内用Google Drive做到了这一点，你能想象用IFC.js和其他技术（如<strong>数据库</strong>或<strong>服务器）构建的可能性有多大吗？</strong>别担心，我们将制作关于所有这些和更多的教程</p></div><footer class="row margin-vert--lg"><div class="col"><strong>标签:</strong><a class="margin-horiz--sm" href="/info/zh/blog/tags/教程">教程</a><a class="margin-horiz--sm" href="/info/zh/blog/tags/cde">CDE</a><a class="margin-horiz--sm" href="/info/zh/blog/tags/google">Google</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="博客文章页面导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/info/zh/blog/Why IFC doesnt work"><div class="pagination-nav__sublabel">较新的帖子</div><div class="pagination-nav__label">« 为什么IFC不起作用</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/info/zh/blog/prometheus"><div class="pagination-nav__sublabel">较早的文章</div><div class="pagination-nav__label">我们需要的BIM »</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#但等等，什么是cde？" class="table-of-contents__link">但等等，什么是CDE？</a></li><li><a href="#好吧，但我为什么想要一个cde？" class="table-of-contents__link">好吧，但我为什么想要一个CDE？</a></li><li><a href="#我明白了，cde是个好东西。但我永远无法自己开发一个。" class="table-of-contents__link">我明白了，CDE是个好东西。但我永远无法自己开发一个。</a></li><li><a href="#cde设计" class="table-of-contents__link">CDE设计</a><ul><li><a href="#战略" class="table-of-contents__link">战略</a></li><li><a href="#建筑学" class="table-of-contents__link">建筑学</a></li><li><a href="#ifcjs应用程序" class="table-of-contents__link">IFC.js应用程序</a></li><li><a href="#浏览器扩展" class="table-of-contents__link">浏览器扩展</a></li><li><a href="#所有的人都在一起" class="table-of-contents__link">所有的人都在一起!</a></li></ul></li><li><a href="#总结" class="table-of-contents__link">总结</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文件</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/info/zh/docs/introduction">教程</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/FXfyR4XrKT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://opencollective.com/ifcjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">资金</a></li><li class="footer__item"><a href="https://twitter.com/ifc_js" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.twitch.tv/ifc_js/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitch</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/info/zh/blog">博客</a></li><li class="footer__item"><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://trello.com/b/d5frRnSe/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权所有 © 2021 IFC.js.</div></div></div></footer></div>
<script src="/info/zh/assets/js/runtime~main.7d35a546.js"></script>
<script src="/info/zh/assets/js/main.a2a3acd6.js"></script>
</body>
</html>